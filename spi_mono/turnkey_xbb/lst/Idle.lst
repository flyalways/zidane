C51 COMPILER V9.00   IDLE                                                                  07/09/2012 21:16:51 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE IDLE
OBJECT MODULE PLACED IN .\obj\Idle.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE MAIN\Idle.c LARGE OPTIMIZE(9,SIZE) BROWSE NOAREGS INCDIR(..\libsource\heade
                    -r) DEFINE(K_ICTYPE=0x03) DEBUG OBJECTEXTEND PRINT(.\lst\Idle.lst) OBJECT(.\obj\Idle.obj)

line level    source

   1          #include "..\Header\SPDA2K.h"
   2          #include "..\header\variables.h"
   3          #include "..\LCM\LCM_BMP.h"
   4          
   5          void Idle_Task(void)
   6          {
   7   1              gb_LCM_InverseDisp=0;
   8   1              LCM_Clear_L0_L7();
   9   1              LCM_ShowChar16x32(10,78);
  10   1              LCM_ShowChar16x32(10,33);
  11   1              gc_LCMBacklightTimer=gc_LCMBacklightTime;
  12   1              gb_RTC_wakeup=1;
  13   1              gb_LCM_ForceShow=1;
  14   1              gc_CurrentCard=9;
  15   1              LCM_ShowBattIcon();
  16   1              LCM_ShowFMOrderRecordIcon();
  17   1              LCM_ShowAlarmIcon();
  18   1              gc_Idle2Suspend=60;
  19   1      
  20   1              while(1)
  21   1              {
  22   2                      if(gb_ShowBatt==1)
  23   2                      {
  24   3                              gb_ShowBatt=0;
  25   3                              LCM_ShowBattIcon();
  26   3                      }
  27   2      
  28   2                      if(gb_RTC_wakeup==1)
  29   2                      {
  30   3                              LCM_ShowClock();
  31   3                              gb_RTC_wakeup=0;
  32   3                      }
  33   2      
  34   2                      Key_Detect();
  35   2                      if(gc_KeyEvent!=0)
  36   2                      {
  37   3                              gc_Idle2Suspend=60;
  38   3                              gb_LCM_InverseDisp=0;
  39   3                              gb_LCM_ForceShow=1;
  40   3      //                      LCM_ShowClock();
  41   3                              LCM_BACKLIGHT=0;
  42   3      
  43   3                              switch(gc_KeyEvent)
  44   3                              {
  45   4                                      case 0x06:      // M
  46   4                                      case 0x16:      // L-M
  47   4                                              gc_Task_Current=C_Task_FuncOption;
  48   4                                              return;
  49   4                                      break;
  50   4      
  51   4                                      case 0x12:      // L-Play
  52   4                                              gc_Task_Current=C_Task_Suspend;
  53   4                                              return;
  54   4                                      break;
C51 COMPILER V9.00   IDLE                                                                  07/09/2012 21:16:51 PAGE 2   

  55   4                              }
  56   3                      }
  57   2      
  58   2                      if(gb_SD_Exist==0)
  59   2                      {
  60   3                              if(SD_Check()==0)
  61   3                              {
  62   4                                      gb_SD_Exist=1;
  63   4                                      gc_CurrentCard=2;
  64   4                              }
  65   3                      }
  66   2                      else
  67   2                      {
  68   3                              if(SD_Detect==1)
  69   3                              {
  70   4                                      gb_SD_Exist=0;
  71   4                              }
  72   3                      }
  73   2      
  74   2                      if(gb_Host_Exist==0)
  75   2                      {
  76   3                              if(HOST_Check()==0)
  77   3                              {
  78   4                                      gb_Host_Exist=1;
  79   4                                      gc_CurrentCard=5;
  80   4                              }
  81   3                      }
  82   2                      else
  83   2                      {
  84   3                              if(Host_DetectDevice()==1)
  85   3                              {
  86   4                                      gb_Host_Exist=0;
  87   4                              }
  88   3                      }
  89   2      
  90   2                      if(gc_CurrentCard!=9)
  91   2                      {
  92   3                              gc_LastCard=gc_CurrentCard;
  93   3                              gb_LCM_InverseDisp=0;
  94   3                              LCM_Clear_L0_L7();
  95   3                              LCM_ShowWait();
  96   3                              LCM_BACKLIGHT=0;
  97   3                              Play_SDFlash_DosInit();
  98   3                              gc_Task_Current=C_Task_MusicPlay;
  99   3                              return;
 100   3                      }
 101   2      
 102   2                      if(gb_OrderRecordTrigger==1)
 103   2                      {
 104   3                              gc_Task_Current=C_Task_FM;
 105   3                              return;
 106   3                      }
 107   2                      
 108   2                      if(gb_AlarmTrigger==1)
 109   2                      {
 110   3                              if(CheckAlarmSetting()==0)      // Match Alarm Clock Setting
 111   3                              {
 112   4                                      gc_Task_Last=C_Task_Idle;
 113   4                                      gc_Task_Current=C_Task_AlarmON;
 114   4                                      return;
 115   4                              }
 116   3                      }
C51 COMPILER V9.00   IDLE                                                                  07/09/2012 21:16:51 PAGE 3   

 117   2      
 118   2                      if(gc_Idle2Suspend==0)
 119   2                      {
 120   3                              gc_Task_Current=C_Task_Suspend;
 121   3                              return;
 122   3                      }
 123   2              }
 124   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    210    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
