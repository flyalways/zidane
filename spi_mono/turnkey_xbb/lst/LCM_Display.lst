C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCM_DISPLAY
OBJECT MODULE PLACED IN .\obj\LCM_Display.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE LCM\LCM_Display.c LARGE OPTIMIZE(9,SIZE) BROWSE NOAREGS INCDIR(..\libsource
                    -\header) DEFINE(K_ICTYPE=0x03) DEBUG OBJECTEXTEND PRINT(.\lst\LCM_Display.lst) OBJECT(.\obj\LCM_Display.obj)

line level    source

   1          #include "..\Header\SPDA2K.h"
   2          #include "..\header\UI_config.h"
   3          #include "..\header\variables.h"
   4          #include "LCM_BMP.h"
   5          
   6          
   7          void LCM_ShowVOL(void)
   8          {
   9   1              data    U8      VOL;
  10   1      
  11   1              LCM_ShowChar12x32(28,28);       // V
  12   1              LCM_ShowChar12x32(23,40);       // O
  13   1              LCM_ShowChar12x32(20,52);       // L
  14   1              VOL=gs_DSP_GLOBAL_RAM.sc_Volume/2;
  15   1              LCM_ShowChar12x32(VOL/10,74);
  16   1              LCM_ShowChar12x32(VOL%10,86);
  17   1              gc_ShowTimer=67; 
  18   1      }
  19          
  20          
  21          void LCM_ShowSongNumber(void)   // 12x32
  22          {
  23   1              LCM_ShowChar12x32(gw_FileIndex[0]/1000,12);
  24   1              LCM_ShowChar12x32((gw_FileIndex[0]%1000)/100,24);
  25   1              LCM_ShowChar12x32((gw_FileIndex[0]%100)/10,36);
  26   1              LCM_ShowChar12x32(gw_FileIndex[0]%10,48);
  27   1              LCM_ShowChar12x32(10,60);       // "/"
  28   1              LCM_ShowChar12x32(gw_FileTotalNumber[0]/1000,72);
  29   1              LCM_ShowChar12x32((gw_FileTotalNumber[0]%1000)/100,84);
  30   1              LCM_ShowChar12x32((gw_FileTotalNumber[0]%100)/10,96);
  31   1              LCM_ShowChar12x32(gw_FileTotalNumber[0]%10,108);
  32   1      }
  33          
  34          void LCM_ShowPlayModeIcon(void) // Play mode small icon
  35          {
  36   1              data    U8      i;
  37   1              xdata   U8      j;
  38   1              xdata   U16     tw_Addr;
  39   1      
  40   1              tw_Addr=PlayModeIcon11x16+gc_RepPlayMode*22;
  41   1              LCM_ReadSPIBMPdata(tw_Addr,22);
  42   1      
  43   1              for(i=0;i<2;i++)
  44   1              {
  45   2                      LCM_set_address(i,12);
  46   2                      for(j=0;j<11;j++)
  47   2                      {
  48   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*11]);
  49   3                      }
  50   2              }
  51   1      }
  52          
  53          
  54          void LCM_ShowEQ(void)
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 2   

  55          {
  56   1      #if 0
                      data    U8 tc_word,i;
                      data    U8 tc_column;
                      data    U8 tc_EQ_table[8];
              
                      switch(gs_DSP_GLOBAL_RAM.sc_EQ_Type)
                      {
                              default:
                                      gs_DSP_GLOBAL_RAM.sc_EQ_Type=0;
                              case 0: // NORMAL
                                      tc_word=6;
                                      tc_EQ_table[0]=22;
                                      tc_EQ_table[1]=23;
                                      tc_EQ_table[2]=25;
                                      tc_EQ_table[3]=21;
                                      tc_EQ_table[4]=11;
                                      tc_EQ_table[5]=20;
                                      break;
                              case 1: // DBB
                                      tc_word=3;
                                      tc_EQ_table[0]=14;
                                      tc_EQ_table[1]=12;
                                      tc_EQ_table[2]=12;
                                      break;
                              case 2: // JAZZ
                                      tc_word=4;
                                      tc_EQ_table[0]=19;
                                      tc_EQ_table[1]=11;
                                      tc_EQ_table[2]=29;
                                      tc_EQ_table[3]=29;
                                      break;
                              case 3: // ROCK
                                      tc_word=4;
                                      tc_EQ_table[0]=25;
                                      tc_EQ_table[1]=23;
                                      tc_EQ_table[2]=13;
                                      tc_EQ_table[3]=13;
                                      break;
                              case 4: // POP
                                      tc_word=3;
                                      tc_EQ_table[0]=24;
                                      tc_EQ_table[1]=23;
                                      tc_EQ_table[2]=24;
                                      break;
                              case 5: // CLASS
                                      tc_word=5;
                                      tc_EQ_table[0]=13;
                                      tc_EQ_table[1]=20;
                                      tc_EQ_table[2]=11;
                                      tc_EQ_table[3]=26;
                                      tc_EQ_table[4]=26;
                                      break;
                      }
                      tc_column=(8-tc_word)*6;
                      tc_column+=16;
                      for(i=0;i<tc_word;i++)
                      {
                              LCM_ShowChar12x32(tc_EQ_table[i],tc_column);            
                              tc_column+=12;          
                      }
              #endif
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 3   

 117   1      }
 118          
 119          
 120          void LCM_ShowERROR(void)
 121          {
 122   1              LCM_Clear_L2_L5();
 123   1              LCM_ShowChar12x32(15,34);               
 124   1              LCM_ShowChar12x32(25,46);               
 125   1              LCM_ShowChar12x32(25,58);               
 126   1              LCM_ShowChar12x32(23,70);               
 127   1              LCM_ShowChar12x32(25,82);               
 128   1      }
 129          
 130          
 131          void LCM_ShowEQIcon(void)
 132          {
 133   1              data    U8      i;
 134   1              xdata   U8      j;
 135   1              xdata   U16     tw_Addr;
 136   1      
 137   1              tw_Addr=EQIcon19x16+gs_DSP_GLOBAL_RAM.sc_EQ_Type*38;
 138   1              LCM_ReadSPIBMPdata(tw_Addr,38);
 139   1              for(i=0;i<2;i++)
 140   1              {
 141   2                      LCM_set_address(i,54);
 142   2                      for(j=0;j<19;j++)
 143   2                      {
 144   3                              LCM_write_data(gc_DirLCMtempBuf[i*19+j]);
 145   3                      }
 146   2              }
 147   1      }
 148          
 149          void LCM_Show_FM_CHNUM(U8 chnum)
 150          {
 151   1              LCM_ShowChar8x16(15,30);        // C
 152   1              LCM_ShowChar8x16(20,42);        // H
 153   1              LCM_ShowChar8x16(chnum/10,54);  // num
 154   1              LCM_ShowChar8x16(chnum%10,66);  // num
 155   1      }
 156          
 157          void LCM_erase_one_page(U8 page)
 158          {
 159   1              xdata   U8 i;
 160   1      
 161   1              LCM_set_address(page, 0);
 162   1              for(i=132;i;i--)
 163   1              {
 164   2                      LCM_write_data(0);
 165   2              }
 166   1      }
 167          
 168          
 169          void LCM_disp_HZKCharBMP(U8 Page, U8 Column,U8 *BMPdataBuf,U8 CharOrWord,U8 reverse)
 170          {
 171   1              data    U8      i;
 172   1              data    U8      j;
 173   1      
 174   1              i=0;
 175   1              if(CharOrWord)//char(8x16)--------word(12x16)
 176   1              {
 177   2                      j=31;
 178   2              }
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 4   

 179   1              else
 180   1              {
 181   2                      j=15;
 182   2              }
 183   1              LCM_set_address(Page,Column);
 184   1      
 185   1              for(;i<j;i=i+2)
 186   1              {
 187   2                      if(reverse)
 188   2                      {
 189   3                              LCM_write_data(~*(BMPdataBuf+(i)));
 190   3                      }
 191   2                      else
 192   2                      {
 193   3                              LCM_write_data(*(BMPdataBuf+(i)));
 194   3                      }
 195   2              }
 196   1      
 197   1              i=1;
 198   1              if(CharOrWord)
 199   1              {
 200   2                      j=32;
 201   2              }
 202   1              else
 203   1              {
 204   2                      j=16;
 205   2              }
 206   1      
 207   1              LCM_set_address(Page+1,Column);
 208   1              
 209   1              for(;i<j;i=i+2)
 210   1              {
 211   2                      if(reverse)
 212   2                      {
 213   3                              LCM_write_data(~*(BMPdataBuf+(i)));
 214   3                      }
 215   2                      else
 216   2                      {
 217   3                              LCM_write_data(*(BMPdataBuf+(i)));
 218   3                      }
 219   2              }
 220   1      }
 221          
 222          
 223          void LCM_DisplayString(U8 *tpc_DataBuf, U16 tw_nByte,U8 tc_RowAddr)
 224          {       
 225   1              data    U8      tc_ColumnEnd;
 226   1              data    U8      temp_RowAddr;
 227   1              data    U8      tc_ColumnAddr;
 228   1              data    U8      tc_ColumnNum;
 229   1              data    U8      tc_temp;
 230   1              data    U16 tw_Loop;
 231   1              xdata   U8      Tmp_DataBuf[32];
 232   1      
 233   1              temp_RowAddr=tc_RowAddr;
 234   1              tc_ColumnEnd=128;
 235   1              tc_ColumnAddr=0;
 236   1              tc_temp=0;
 237   1              tw_Loop=0;
 238   1        memset(Tmp_DataBuf,0,32);
 239   1              while(tw_Loop<tw_nByte)
 240   1              {
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 5   

 241   2                      tc_ColumnNum=LCM_UNICODE_HZK_GET_BMP(*(tpc_DataBuf+tw_Loop),*(tpc_DataBuf+tw_Loop+1),Tmp_DataBuf,0);
 242   2      
 243   2                      if(*(tpc_DataBuf+tw_Loop)&0x80)
 244   2                      {
 245   3                              tc_temp=16;
 246   3                      }
 247   2                      else
 248   2                      {
 249   3                              tc_temp=8;
 250   3                      }
 251   2      
 252   2                      if((tc_ColumnAddr+tc_temp)>tc_ColumnEnd)
 253   2                      {
 254   3                              LCM_FillColumn(tc_RowAddr/8,tc_ColumnAddr,tc_ColumnEnd);
 255   3                              if(tc_RowAddr+16>=temp_RowAddr+32) 
 256   3                              {
 257   4                                      break;
 258   4                              }
 259   3                              tc_ColumnAddr=0;
 260   3                              tc_RowAddr+=16;
 261   3                      }
 262   2                      if((tc_ColumnNum&0x7f)>8)
 263   2                      {
 264   3                              LCM_disp_HZKCharBMP(tc_RowAddr/8,tc_ColumnAddr,Tmp_DataBuf,1,0);
 265   3                      }
 266   2                      else
 267   2                      {
 268   3                              LCM_disp_HZKCharBMP(tc_RowAddr/8,tc_ColumnAddr,Tmp_DataBuf,0,0);
 269   3                              if(tc_temp==16)
 270   3                              {
 271   4                                      LCM_FillColumn(tc_RowAddr/8,tc_ColumnAddr+8,tc_ColumnAddr+16);
 272   4                              }
 273   3                      }
 274   2                      tc_ColumnAddr+=tc_temp;
 275   2                      tw_Loop++;
 276   2                      if(tc_ColumnNum&0x80)
 277   2                      {
 278   3                              tw_Loop++;
 279   3                      }
 280   2              }
 281   1      
 282   1              if(tc_ColumnAddr<tc_ColumnEnd)
 283   1              {
 284   2                      LCM_FillColumn(tc_RowAddr/8,tc_ColumnAddr,tc_ColumnEnd);
 285   2              }
 286   1              tc_RowAddr+=16;
 287   1              while(tc_RowAddr<temp_RowAddr+32)
 288   1              {
 289   2                      LCM_FillColumn(tc_RowAddr/8,0,tc_ColumnEnd);
 290   2                      tc_RowAddr+=16;
 291   2              }
 292   1      }
 293          
 294          
 295          void LCM_FillColumn(U8 tc_Page,U8 tc_CurrentColumn,U8 tc_TotalColumn)
 296          {
 297   1              data    U8      tc_Width;
 298   1              xdata   U8      i;
 299   1              data    U8      j;
 300   1      
 301   1              tc_Width=tc_TotalColumn-tc_CurrentColumn;
 302   1              for(j=0;j<2;j++)
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 6   

 303   1              {
 304   2                      LCM_set_address(tc_Page+j,tc_CurrentColumn);
 305   2                      for(i=0;i<tc_Width;i++)
 306   2                      {               
 307   3                              LCM_write_data(0);      
 308   3                      }
 309   2              }
 310   1      }
 311          
 312          
 313          U8 LCM_Disp_FileName(U8 *DataBuf,U8 tc_ISNOrUnicode,U8 nByte,U8 DispOnOff)
 314          {
 315   1              data    U8      i;
 316   1              data    U8      Column;
 317   1              data    U8      Sts;
 318   1              data    U8      tc_ColumnNum;
 319   1              data    U8      tc_FirstWorldColumnNum;
 320   1              xdata   U8      Tmp_DataBuf[32];
 321   1        memset(Tmp_DataBuf,0,32);
 322   1              i=0;
 323   1              Sts=0;
 324   1              Column=0;
 325   1              tc_FirstWorldColumnNum=0;
 326   1      
 327   1              while(i<nByte)
 328   1              {
 329   2                      if(DispOnOff)
 330   2                      {
 331   3                              if(!tc_ISNOrUnicode)
 332   3                              {
 333   4                                      tc_ColumnNum=LCM_UNICODE_HZK_GET_BMP(*(DataBuf+i+1),*(DataBuf+i),Tmp_DataBuf,1);
 334   4                              }
 335   3                              else
 336   3                              {
 337   4                                      tc_ColumnNum=LCM_UNICODE_HZK_GET_BMP(*(DataBuf+i),*(DataBuf+i+1),Tmp_DataBuf,0);
 338   4                              }
 339   3      
 340   3                              if(i==0)
 341   3                              {
 342   4                                      tc_FirstWorldColumnNum=tc_ColumnNum;
 343   4                              }
 344   3                      }                       
 345   2                      if((Column+(tc_ColumnNum&0x7f))>128)
 346   2                      {
 347   3                              Sts=1;
 348   3                              goto DispOver;
 349   3                      }
 350   2                      if(DispOnOff)
 351   2                      {       
 352   3                              if((tc_ColumnNum&0x7f)>8)
 353   3                              {
 354   4                                      LCM_disp_HZKCharBMP(4,Column,Tmp_DataBuf,LCM_IsWord,0);
 355   4                              }
 356   3                              else
 357   3                              {
 358   4                                      LCM_disp_HZKCharBMP(4,Column,Tmp_DataBuf,LCM_IsChar,0);
 359   4                              }
 360   3                      }
 361   2                      Column+=(tc_ColumnNum&0x7f);
 362   2      
 363   2                      i++;
 364   2                      if(tc_ColumnNum&0x80)
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 7   

 365   2                      {
 366   3                              i++;
 367   3                      }
 368   2              }
 369   1              Sts=0;
 370   1      DispOver:
 371   1              while(Column<128 && DispOnOff)
 372   1              {
 373   2                      LCM_set_address(4,Column);
 374   2                      LCM_write_data(0x00);
 375   2                      LCM_set_address(4+1,Column);
 376   2                      LCM_write_data(0x00);
 377   2                      Column++;
 378   2              }
 379   1              if(Sts)
 380   1              {
 381   2                      if(tc_FirstWorldColumnNum&0x80)
 382   2                      {
 383   3                              gw_DispFileName_ByteOffset++;
 384   3                      }
 385   2                      gw_DispFileName_ByteOffset+=1;
 386   2              }
 387   1              else
 388   1              {
 389   2                      gw_DispFileName_ByteOffset=0;
 390   2              }
 391   1              return Sts;//overstep display area
 392   1      }
 393          
 394          
 395          void LCM_ShowClock(void)
 396          {
 397   1              xdata   U32     tdw_RTC_Second;
 398   1      
 399   1              tdw_RTC_Second=gdw_RTC_Second%86400;
 400   1              //gdw_RTC_Second
 401   1              LCM_ShowChar16x32((tdw_RTC_Second%60)/10,91);   // 10S
 402   1              LCM_ShowChar16x32(tdw_RTC_Second%10,108);               // 1S
 403   1      
 404   1              if(((tdw_RTC_Second%60)==0)||(gb_LCM_ForceShow==1))
 405   1              {
 406   2                      LCM_ShowChar16x32((((tdw_RTC_Second/60)%60)/10),48);// 10M
 407   2                      LCM_ShowChar16x32((((tdw_RTC_Second/60)%60)%10),64);// 1M
 408   2              }
 409   1      
 410   1              if(((tdw_RTC_Second%3600)==0)||(gb_LCM_ForceShow==1))
 411   1              {
 412   2                      LCM_ShowChar16x32(tdw_RTC_Second/36000,4);              // 10H
 413   2                      LCM_ShowChar16x32((tdw_RTC_Second/3600)%10,21); // 1H
 414   2              }
 415   1              gb_LCM_ForceShow=0;
 416   1      }
 417          
 418          
 419          void LCM_DisplayMenuString(U8 *tpc_DataBuf, U16 tw_nByte,U8 tc_ColumnAddr,U8 tc_RowAddr,bit tb_Fill)
 420          {       
 421   1              data    U8      temp_RowAddr;
 422   1              data    U8      tc_ColumnNum;
 423   1              data    U8      tc_temp;
 424   1              data    U16 tw_Loop;
 425   1              xdata   U8      Tmp_DataBuf[32];
 426   1                memset(Tmp_DataBuf,0,32);
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 8   

 427   1              temp_RowAddr=tc_RowAddr;
 428   1              tc_temp=0;
 429   1              tw_Loop=0;
 430   1      
 431   1              while(tw_Loop<tw_nByte)
 432   1              {
 433   2      #ifdef SPI_1M
 434   2                      tc_ColumnNum=LCM_UNICODE_HZK_GET_BMP(*(tpc_DataBuf+tw_Loop),*(tpc_DataBuf+tw_Loop+1),Tmp_DataBuf,1);
 435   2      #else
                              tc_ColumnNum=LCM_UNICODE_HZK_GET_BMP(*(tpc_DataBuf+tw_Loop+1),*(tpc_DataBuf+tw_Loop),Tmp_DataBuf,1);
              #endif
 438   2                      tc_temp=tc_ColumnNum&~0x80;
 439   2      
 440   2                      if(tc_temp>8)
 441   2                      {
 442   3                              LCM_disp_HZKCharBMP(tc_RowAddr/8,tc_ColumnAddr,Tmp_DataBuf,1,0);
 443   3                      }
 444   2                      else
 445   2                      {
 446   3                              LCM_disp_HZKCharBMP(tc_RowAddr/8,tc_ColumnAddr,Tmp_DataBuf,0,0);
 447   3                      }
 448   2                      tc_ColumnAddr+=tc_temp;
 449   2                      tw_Loop+=2;
 450   2      #ifdef SPI_1M                     //防止显示过长导致该行显示异常的问题  --sunzk add110324
 451   2                      if(tc_ColumnAddr>=118)
 452   2                      {
 453   3                              break;
 454   3                      }
 455   2      #else
                              if(tc_ColumnAddr>=128)
                              {
                                      break;
                              }
              #endif
 461   2              }
 462   1              if(tb_Fill)
 463   1              {
 464   2                      LCM_FillColumn(tc_RowAddr/8,tc_ColumnAddr,128);
 465   2              }
 466   1      }
 467          
 468          void LCM_Clear_L0_L7(void)
 469          {       
 470   1              data    U8      i;
 471   1      
 472   1              for(i=0;i<8;i++)
 473   1              {
 474   2                      LCM_erase_one_page(i);  
 475   2              }
 476   1      }
 477          
 478          void LCM_Clear_L0_L1(void)
 479          {
 480   1          data        U8 i;
 481   1      
 482   1          for(i=0;i<2;i++)
 483   1          {
 484   2                      LCM_erase_one_page(i);
 485   2          }
 486   1      }
 487          
 488          void LCM_Clear_L2_L5(void)
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 9   

 489          {
 490   1          data        U8 i;
 491   1      
 492   1              for(i=2;i<6;i++)
 493   1          {
 494   2              LCM_erase_one_page(i);
 495   2              }
 496   1      }
 497          
 498          void LCM_Clear_L6_L7(void)
 499          {
 500   1          data        U8 i;
 501   1      
 502   1              for(i=6;i<8;i++)
 503   1          {
 504   2              LCM_erase_one_page(i);
 505   2              }
 506   1      }
 507          
 508          void LCM_Clear_L2_L7(void)
 509          {
 510   1          data        U8 i;
 511   1      
 512   1              for(i=2;i<8;i++)
 513   1          {
 514   2              LCM_erase_one_page(i);
 515   2              }
 516   1      }
 517          
 518          void LCM_ShowChar16x32(U8 Num,U8 tc_column)
 519          {
 520   1              data    U8      i;
 521   1              xdata   U8      j;
 522   1              xdata   U16     tw_Addr;
 523   1      
 524   1              tw_Addr=DigitIcon16x32+(U16)Num*64;
 525   1              LCM_ReadSPIBMPdata(tw_Addr,64);
 526   1      
 527   1              for(i=0;i<4;i++)
 528   1              {
 529   2                      LCM_set_address(i+2,tc_column);
 530   2                      for(j=0;j<16;j++)
 531   2                      {
 532   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*16]);
 533   3                      }
 534   2              }
 535   1      }
 536          
 537          void LCM_ShowChar12x32(U8 Num,U8 tc_column)
 538          {
 539   1              data    U8      i;
 540   1              xdata   U8      j;
 541   1              xdata   U16     tw_Addr;
 542   1      
 543   1              tw_Addr=CharIcon12x32+(U16)Num*48;
 544   1              LCM_ReadSPIBMPdata(tw_Addr,48);
 545   1      
 546   1              for(i=0;i<4;i++)
 547   1              {
 548   2                      LCM_set_address(i+2,tc_column);
 549   2                      for(j=0;j<12;j++)
 550   2                      {
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 10  

 551   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*12]);
 552   3                      }
 553   2              }
 554   1      }
 555          
 556          void LCM_ShowChar10x16(U8 Num,U8 tc_column)
 557          {
 558   1              data    U8      i;
 559   1              xdata   U8      j;
 560   1              xdata   U16     tw_Addr;
 561   1      
 562   1              tw_Addr=DigitIcon10x16+(U16)Num*20;
 563   1              LCM_ReadSPIBMPdata(tw_Addr,20);
 564   1              for(i=0;i<2;i++)
 565   1              {
 566   2                      LCM_set_address(i+gc_LCM_line,tc_column);
 567   2                      for(j=0;j<10;j++)
 568   2                      {
 569   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*10]);
 570   3                      }
 571   2              }
 572   1      }
 573          
 574          void LCM_ShowChar5x8(U8 Num,U8 tc_column)
 575          {
 576   1              xdata   U8      j;
 577   1              xdata   U16     tw_Addr;
 578   1      
 579   1              tw_Addr=BitrateNum5x8+(U16)Num*5;
 580   1              LCM_ReadSPIBMPdata(tw_Addr,5);
 581   1              LCM_set_address(0,tc_column);
 582   1              for(j=0;j<5;j++)
 583   1              {
 584   2                      LCM_write_data(gc_DirLCMtempBuf[j]);
 585   2              }
 586   1      }
 587          
 588          void LCM_ShowChar8x16(U8 Num,U8 tc_column)
 589          {
 590   1              data    U8      i;
 591   1              xdata   U8      j;
 592   1              xdata   U16     tw_Addr;
 593   1      
 594   1              tw_Addr=CharIcon8x16+(U16)Num*16;
 595   1              LCM_ReadSPIBMPdata(tw_Addr,16);
 596   1              for(i=0;i<2;i++)
 597   1              {
 598   2                      LCM_set_address(i+gc_LCM_line,tc_column);
 599   2                      for(j=0;j<8;j++)
 600   2                      {
 601   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*8]);
 602   3                      }
 603   2              }
 604   1      }
 605          
 606          void LCM_ShowChar6x8(U8 Num,U8 tc_column)
 607          {
 608   1              xdata   U8      j;
 609   1              xdata   U16     tw_Addr;
 610   1      
 611   1              tw_Addr=SongNum6x8+Num*6;
 612   1              LCM_ReadSPIBMPdata(tw_Addr,6);
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 11  

 613   1              LCM_set_address(gc_LCM_line,tc_column);
 614   1              for(j=0;j<6;j++)
 615   1              {
 616   2                      LCM_write_data(gc_DirLCMtempBuf[j]);
 617   2              }
 618   1      }
 619          
 620          
 621          void LCM_ShowBattIcon(void)
 622          {
 623   1              data    U8      i;
 624   1              xdata   U8      j;
 625   1              xdata   U16     tw_Addr;
 626   1      
 627   1              tw_Addr=BatteryIcon16x16+gc_BatteryLevel*32;
 628   1              LCM_ReadSPIBMPdata(tw_Addr,32);
 629   1              for(i=0;i<2;i++)
 630   1              {
 631   2                      LCM_set_address(i,111);
 632   2                      for(j=0;j<16;j++)
 633   2                      {
 634   3                              LCM_write_data(gc_DirLCMtempBuf[j+i*16]);
 635   3                      }
 636   2              }
 637   1      }
 638          
 639          void LCM_ShowBitRate(void)
 640          {
 641   1              LCM_ShowChar5x8(gs_System_State.w_SampleRate/100,77);
 642   1              LCM_ShowChar5x8(gs_System_State.w_SampleRate%100/10,83);
 643   1              LCM_ShowChar5x8(gs_System_State.w_SampleRate%10,89);
 644   1      }
 645          
 646          void LCM_ShowMusicType(void)
 647          {
 648   1              data    U8      i;
 649   1              xdata   U8      j;
 650   1              xdata   U16     tw_Addr;
 651   1      
 652   1              tw_Addr=MusicTypeIcon23x16+gc_Play_FileType*46;
 653   1              LCM_ReadSPIBMPdata(tw_Addr,46);
 654   1              for(i=0;i<2;i++)
 655   1              {
 656   2                      LCM_set_address(i,74);
 657   2                      for(j=0;j<23;j++)
 658   2                      {
 659   3                              LCM_write_data(gc_DirLCMtempBuf[i*23+j]);
 660   3                      }
 661   2              }
 662   1      }
 663          
 664          void LCM_ShowSongNum(void)
 665          {
 666   1              gc_LCM_line=0;
 667   1              LCM_ShowChar6x8(gw_FileIndex[0]/1000,25);
 668   1              LCM_ShowChar6x8((gw_FileIndex[0]/100)%10,32);
 669   1              LCM_ShowChar6x8((gw_FileIndex[0]/10)%10,39);
 670   1              LCM_ShowChar6x8(gw_FileIndex[0]%10,46);
 671   1      }
 672          
 673          void LCM_ShowSongTotalNum(void)
 674          {
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 12  

 675   1              gc_LCM_line=1;
 676   1              LCM_ShowChar6x8(gw_FileTotalNumber[0]/1000,25);
 677   1              LCM_ShowChar6x8((gw_FileTotalNumber[0]/100)%10,32);
 678   1              LCM_ShowChar6x8((gw_FileTotalNumber[0]/10)%10,39);
 679   1              LCM_ShowChar6x8(gw_FileTotalNumber[0]%10,46);
 680   1      }
 681          
 682          void LCM_ShowSongTime(void)
 683          {
 684   1              gc_LCM_line=2;
 685   1              LCM_ShowChar8x16(10,37);        // :
 686   1              LCM_ShowChar8x16(68,60);        // /
 687   1              if(gw_TotalSec>=3600)
 688   1              {
 689   2                      LCM_ShowChar8x16(10,16);        // :
 690   2                      LCM_ShowChar8x16(10,79);        // :
 691   2                      LCM_ShowChar8x16(10,101);       // :
 692   2                      LCM_ShowChar8x16(gw_TotalSec/3600,70);          // 1H
 693   2                      LCM_ShowChar8x16((gw_TotalSec%3600)/600,84);// 10M
 694   2                      LCM_ShowChar8x16((gw_TotalSec/60)%10,92);       // 1M
 695   2                      LCM_ShowChar8x16((gw_TotalSec%60)/10,106);      // 10S
 696   2                      LCM_ShowChar8x16(gw_TotalSec%10,114);           // 1S
 697   2              }
 698   1              else
 699   1              {
 700   2                      LCM_ShowChar8x16(10,88);        // :
 701   2                      LCM_ShowChar8x16((gw_TotalSec%3600)/600,70);// 10M
 702   2                      LCM_ShowChar8x16((gw_TotalSec/60)%10,78);       // 1M
 703   2                      LCM_ShowChar8x16((gw_TotalSec%60)/10,92);       // 10S
 704   2                      LCM_ShowChar8x16(gw_TotalSec%10,100);           // 1S   
 705   2              }
 706   1      }
 707          
 708          void LCM_ShowPlayTime(U16 time)
 709          {
 710   1              gc_LCM_line=2;
 711   1              if(gw_TotalSec>=3600)
 712   1              {
 713   2                      LCM_ShowChar8x16(time/3600,6);  // 1H
 714   2              }
 715   1              LCM_ShowChar8x16((time/600)%10,19);     // 10M
 716   1              LCM_ShowChar8x16((time/60)%10,28);      // 1M
 717   1              LCM_ShowChar8x16((time%60)/10,42);      // 10S
 718   1              LCM_ShowChar8x16(time%10,50);           // 1S
 719   1      }
 720          
 721          void LCM_ShowRECTime(U16 time)
 722          {
 723   1              data    U8      i;
 724   1      
 725   1              gc_LCM_line=2;
 726   1              LCM_ShowChar8x16(10,51);
 727   1              LCM_ShowChar8x16(10,75);
 728   1              i=time/36000;
 729   1              LCM_ShowChar8x16(i,32); // 10H
 730   1              time=time-i*36000;
 731   1              i=time/3600;
 732   1              LCM_ShowChar8x16(i,40); // 1H
 733   1              time=time-i*3600;
 734   1              i=time/600;
 735   1              LCM_ShowChar8x16(i,56); // 10M
 736   1              time=time-i*600;
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 13  

 737   1              i=time/60;
 738   1              LCM_ShowChar8x16(i,64); // 1M
 739   1              time=time-i*60;
 740   1              i=time/10;
 741   1              LCM_ShowChar8x16(i,80); // 10S
 742   1              i=time%10;
 743   1              LCM_ShowChar8x16(i,88); // 1S
 744   1      }
 745          
 746          void LCM_ShowRECRemainTime(U32 time)
 747          {
 748   1              data    U8      i;
 749   1      
 750   1              gc_LCM_line=4;
 751   1              LCM_ShowChar8x16(10,51);
 752   1              LCM_ShowChar8x16(10,75);
 753   1              i=time/360000;
 754   1              LCM_ShowChar8x16(i,24); // 100H
 755   1              time=time-i*360000;
 756   1              i=time/36000;
 757   1              LCM_ShowChar8x16(i,32); // 10H
 758   1              time=time-i*36000;
 759   1              i=time/3600;
 760   1              LCM_ShowChar8x16(i,40); // 1H
 761   1              time=time-i*3600;
 762   1              i=time/600;
 763   1              LCM_ShowChar8x16(i,56); // 10M
 764   1              time=time-i*600;
 765   1              i=time/60;
 766   1              LCM_ShowChar8x16(i,64); // 1M
 767   1              time=time-i*60;
 768   1              i=time/10;
 769   1              LCM_ShowChar8x16(i,80); // 10S
 770   1              i=time%10;
 771   1              LCM_ShowChar8x16(i,88); // 1S
 772   1      }
 773          
 774          
 775          void LCM_ShowPinPu(void)
 776          {
 777   1              data    U8      i;
 778   1              xdata   U8      j;
 779   1              xdata   U16     tw_Addr;
 780   1      
 781   1              if(gb_LrcFileName_Exist==1)
 782   1              {
 783   2                      return;
 784   2              }
 785   1              tw_Addr=PinPu128x16+(U16)gc_PinPuCount*256;
 786   1              LCM_ReadSPIBMPdata(tw_Addr,256);
 787   1              gc_PinPuTimer=8;
 788   1              for(i=0;i<2;i++)
 789   1              {
 790   2                      LCM_set_address(i+6,0);
 791   2                      for(j=0;j<128;j++)
 792   2                      {
 793   3                              LCM_write_data(gc_DirLCMtempBuf[i*128+j]);
 794   3                      }
 795   2              }       
 796   1      }
 797          
 798          void LCM_ShowPlayPauseIcon(void)
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 14  

 799          {
 800   1              data    U8      i;
 801   1              xdata   U8      j;
 802   1              xdata   U16     tw_Addr;
 803   1      
 804   1              tw_Addr=PlayPauseIcon10x16;
 805   1              if(gs_System_State.c_Phase==TASK_PHASE_PAUSE||gs_System_State.c_Phase==TASK_PHASE_STOP)
 806   1              {
 807   2                      tw_Addr+=22;
 808   2              }
 809   1              LCM_ReadSPIBMPdata(tw_Addr,22);
 810   1              for(i=0;i<2;i++)
 811   1              {
 812   2                      LCM_set_address(i,0);
 813   2                      for(j=0;j<11;j++)
 814   2                      {
 815   3                              LCM_write_data(gc_DirLCMtempBuf[i*11+j]);
 816   3                      }
 817   2              }
 818   1      }
 819          
 820          void LCM_ShowRepeatIcon(void)
 821          {
 822   1              data    U8      i;
 823   1              xdata   U8      j;
 824   1              xdata   U16     tw_Addr;
 825   1      
 826   1              tw_Addr=RepeatIcon19x16;
 827   1              if(gs_DSP_GLOBAL_RAM.s_DSP_RAM.sc_RepeatMode==REPEAT_AB_NULL)
 828   1              {
 829   2                      tw_Addr+=38*3;
 830   2              }
 831   1              else if(gb_FlashRepeatIcon==0)
 832   1              {
 833   2                      tw_Addr+=38*2;
 834   2              }
 835   1              else
 836   1              {
 837   2                      if(gs_DSP_GLOBAL_RAM.s_DSP_RAM.sc_RepeatMode==REPEAT_A)
 838   2                      {
 839   3                              tw_Addr+=38;
 840   3                      }
 841   2                      else if(gs_DSP_GLOBAL_RAM.s_DSP_RAM.sc_RepeatMode==REPEAT_AB)
 842   2                      {
 843   3                              return;
 844   3                      }
 845   2              }
 846   1      
 847   1              LCM_ReadSPIBMPdata(tw_Addr,38);
 848   1              for(i=0;i<2;i++)
 849   1              {
 850   2                      LCM_set_address(i,29);
 851   2                      for(j=0;j<19;j++)
 852   2                      {
 853   3                              LCM_write_data(gc_DirLCMtempBuf[i*19+j]);
 854   3                      }
 855   2              }
 856   1      }
 857          
 858          void LCM_ShowRecordStartTime_Hour(void)
 859          {
 860   1              gc_LCM_line=2;
C51 COMPILER V9.00   LCM_DISPLAY                                                           07/09/2012 21:16:49 PAGE 15  

 861   1              LCM_ShowChar8x16(gdw_OrderRecordTime/36000,70);                 // 10H
 862   1              LCM_ShowChar8x16((gdw_OrderRecordTime/3600)%10,78);             // 1H
 863   1      }
 864          
 865          void LCM_ShowRecordStartTime_Minute(void)
 866          {
 867   1              gc_LCM_line=2;
 868   1              LCM_ShowChar8x16((((gdw_OrderRecordTime/60)%60)/10),90);// 10M
 869   1              LCM_ShowChar8x16((((gdw_OrderRecordTime/60)%60)%10),98);// 1M
 870   1      }
 871          
 872          void LCM_ShowAlarmTime_Hour(void)
 873          {
 874   1              gc_LCM_line=2;
 875   1              LCM_ShowChar8x16(gdw_AlarmTime/36000,70);                       // 10H
 876   1              LCM_ShowChar8x16((gdw_AlarmTime/3600)%10,78);           // 1H
 877   1      }
 878          
 879          void LCM_ShowAlarmTime_Minute(void)
 880          {
 881   1              gc_LCM_line=2;
 882   1              LCM_ShowChar8x16((((gdw_AlarmTime/60)%60)/10),90);// 10M
 883   1              LCM_ShowChar8x16((((gdw_AlarmTime/60)%60)%10),98);// 1M
 884   1      }
 885          
 886          void LCM_ShowDuration(void)
 887          {
 888   1              gc_LCM_line=4;
 889   1              LCM_ShowChar8x16(gw_OrderRecDuration/6000,70);// 100M
 890   1              LCM_ShowChar8x16((gw_OrderRecDuration%6000)/600,78);// 10M
 891   1              LCM_ShowChar8x16(0,86);// 1M
 892   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   4365    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----     160
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      40
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
