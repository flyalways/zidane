C51 COMPILER V7.10   USB_PROCESS                                                           02/28/2011 10:30:37 PAGE 1   


C51 COMPILER V7.10, COMPILATION OF MODULE USB_PROCESS
OBJECT MODULE PLACED IN .\obj\USB_process.obj
COMPILER INVOKED BY: F:\Keil C 7.10\chengxu\C51\BIN\C51.EXE UI_USB\USB_process.c LARGE OPTIMIZE(9,SIZE) BROWSE NOAREGS I
                    -NCDIR(..\libsource\header) DEFINE(K_ICTYPE=0x03) DEBUG OBJECTEXTEND PRINT(.\lst\USB_process.lst) OBJECT(.\obj\USB_proces
                    -s.obj)

line level    source

   1          #include "SPDA2K.h"
   2          #include "dos\fs_struct.h"
   3          #include "Memalloc.h"
   4          
   5          extern data U8 gc_PhaseInx;
   6          extern void Timer0_init(void);
   7          
   8          extern bit gb_FindFlag;
   9          
  10          extern data     U8      gc_LCM_Media;
  11          extern xdata    U8      gc_DisplayEQIcon;
  12          extern data     U16     gw_DisplayBitRate;
  13          extern xdata    U8      gc_DisplayPlayMode;
  14          extern xdata    U16     gw_DispSongNum1;
  15          
  16          extern bit gb_cmd_timeout;
  17          extern U8 gc_PseudoCard_Flag;
  18          
  19          void Detect_USB()
  20          {
  21   1              USB_PlugDetect();
  22   1              if(gbt_USB_Detected)    M_SetFlag_USB;
  23   1              else                    M_ClrFlag_USB;
  24   1      }
  25          
  26          void USB_Task()
  27          {
  28   1              USB_On();//(JC)loop to wait 'n parse msdc scsi command, ret if usb unplugged (gbt_USB_Detected)
  29   1      
  30   1              if((!M_ChkFlag_USB) || (gb_cmd_timeout==1))  //080925chiayen modify
  31   1              {
  32   2                      gbt_USB_Detected=0;
  33   2                      GLOBAL_REG[0x10]&= 0xFE;        // Disable DSP clock, Jimi 080729 for pop noise as 1st time play
  34   2                      GLOBAL_REG[0x02] &= 0xFE;       // Release DSP Reset, Jimi 080729 for pop noise as 1st time play
  35   2      
  36   2                      Timer0_init();
  37   2                      EA  = 1;
  38   2      
  39   2                      gc_bCBWLUN=0;
  40   2                      gc_LCM_Media=0xff;
  41   2                      gc_DisplayEQIcon=0xFF;
  42   2                      gw_DisplayBitRate=0xFFFF;
  43   2                      gc_DisplayPlayMode=0xFF;
  44   2                      gw_DispSongNum1=0xFFFF;
  45   2                      gc_PseudoCard_Flag=0;
  46   2      
  47   2                      gc_Task_Next=C_Task_Play;
  48   2                      gw_init_needed |= (SET_BIT0 | SET_BIT7);
  49   2                      gw_FileIndex[0]=0;
  50   2                      gc_PhaseInx = 0;                                                                
  51   2                      gb_FindFlag = 0;        
  52   2              }
  53   1      
C51 COMPILER V7.10   USB_PROCESS                                                           02/28/2011 10:30:37 PAGE 2   

  54   1              gc_Task_Current=gc_Task_Next;
  55   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    125    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
